<div class="page-content-wrapper main-content">
    <div class="container-md">
        <h4 class="mt-3 mb-3">Manage Your Orders</h4>
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="w-100" id="dataTable">
                        <thead>
                            <tr>
                                <th scope="col">No</th>
                                <th scope="col">Name</th>

                                <th scope="col">Full Details</th>
                                <th scope="col">Diet Details</th>
                                <th scope="col">Payment</th>
                                <th scope="col">Payment Status</th>
                                <th scope="col">Manage</th>

                            </tr>
                        </thead>
                        <tbody>
                            {{#each orders}}
                            <tr class="">
                                <td>{{incremented @index}}</td>
                                <td>{{this.user.Fname}} {{this.user.Lname}}</td>

                                <td>
                                    <ul class="p-0">
                                        <li><b>Email : </b>{{this.user.Email}}</li>
                                        <li><b>Address : </b>{{this.deliveryDetails.Address}}
                                        </li>
                                        <li><b>Phone : </b>{{this.deliveryDetails.Phone}}</li>
                                        <li><b>Pincode : </b>{{this.deliveryDetails.Pincode}}
                                        </li>
                                        <li><b>District : </b>{{this.deliveryDetails.District}}
                                        </li>
                                        <li><b>State : </b>{{this.deliveryDetails.State}}</li>

                                    </ul>
                                </td>
                                <td>
                                    <ul class="p-0">
                                        <li><b>Diet Name : </b>{{this.diet.dietname}}</li>

                                        {{!-- <li><b>Seat : </b>{{this.diet.seat}}</li>
                                        <li><b>Pincode : </b>{{this.deliveryDetails.Pincode}}
                                        </li>
                                        <li><b>District : </b>{{this.deliveryDetails.District}}
                                        </li>
                                        <li><b>State : </b>{{this.deliveryDetails.State}}</li> --}}

                                    </ul>
                                </td>
                                <td>{{this.totalAmount}}/-</td>
                                <td class="payment-method">{{this.paymentMethod}}</td>


                                <td>
                                    <a href="javascript:void(0);" onclick="deleteDiet()"
                                        class="btn btn-danger">Delete</a>
                                </td>

                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.querySelectorAll('td.payment-method').forEach(td => {
        if (td.textContent.trim() === 'COD') {
            td.textContent = 'Cash Not Paid';
            td.style.color = 'red'; // Set text color to red
        }
        if (td.textContent.trim() === 'ONLINE') {
            td.textContent = 'Cash Paid';
            td.style.color = 'green'; // Set text color to red
        }
    });
</script>

<script>
    function deleteDiet(id) {
        Swal.fire({
            title: `Are you sure you want to delete this order?`,
            text: "This action cannot be undone!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'No, cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                // Redirect to the delete route if confirmed
                window.location.href = `/expert/cancel-order/${id}`;
            }
        });
    }
</script>